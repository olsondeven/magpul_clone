{"version":3,"sources":["app.js","directive/carouselDirective.js","directive/footerDirective.js","directive/menuBarDirective.js","ctrl/cartCtrl.js","ctrl/homeCtrl.js","ctrl/loginCtrl.js","ctrl/productCtrl.js","ctrl/productDetailCtrl.js","services/cartSrvc.js","services/loginSrvc.js","services/mainSrvc.js","services/productSrvc.js"],"names":["myApp","angular","module","config","$stateProvider","$urlRouterProvider","otherwise","state","url","templateUrl","controller","directive","restrict","$scope","myInterval","slides","image","text","link","scope","element","attribute","productSrvc","cartSrvc","fireFn","cartCount","getCart","reduce","prev","curr","quantity","$on","event","args","$rootScope","cart","cartTotalFn","total","forEach","index","parseFloat","console","log","subTotal","copyright","price","cartUpdate","num","parseInt","updateCart","$broadcast","swal","cartRemove","splice","mainSrvc","loginSrvc","test","$state","$stateParams","$sce","category","subcategory","toUpperCase","getProductList","then","res","products","colorFn","str","color","colorImg","id","getProductId","productData","addToShoppingCart","i","p","product","name","caliber","modelNumber","img","mainimg","new","addToCart","service","$http","localStorage","getItem","JSON","parse","arr","stringify","removeFromCart","method","splitDollarArr","data","obj","push","toFixed","setItem","present","arrKey","object","key","match","split","arrNew","splitDollarObj"],"mappings":"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","file":"bundle.js","sourcesContent":["var myApp = angular.module('myApp',['ui.router','ui.bootstrap']);\r\n\r\nmyApp.config(function($stateProvider, $urlRouterProvider){\r\n  $urlRouterProvider.otherwise('/');\r\n  $stateProvider\r\n  .state('home', {\r\n    url: '/',\r\n    templateUrl: './templates/home.html',\r\n    controller: 'homeCtrl'\r\n  })\r\n  .state('product',{\r\n    url: '/product/:category/:subcategory',\r\n    templateUrl: './templates/product.html',\r\n    controller: 'productCtrl'\r\n  })\r\n  .state('productDetail',{\r\n    url: '/product/:id',\r\n    templateUrl: './templates/productDetails.html',\r\n    controller: 'productDetailCtrl'\r\n  })\r\n  .state('cart',{\r\n    url: '/cart',\r\n    templateUrl: './templates/cart.html',\r\n    controller: 'cartCtrl'\r\n  })\r\n  .state('login',{\r\n    url: '/login',\r\n    templateUrl: './templates/login.html',\r\n    controller: 'loginCtrl'\r\n  })\r\n});//closing\r\n","myApp.directive('carouselDirect',function(){\r\n  return {\r\n    restrict: 'EA',\r\n    templateUrl: './js/directive/carousel.html',\r\n    controller: function($scope){\r\n      $scope.myInterval = 3000;\r\n      $scope.slides = [{\r\n                image:'https://www.magpul.com/Admin/Public/GetImage.ashx?Image=/Files/Files/Images/Homepage/PRS_GEN3_Carousel.jpg&Format=jpg&Height=760&Crop=5&background=ffffff',\r\n                text: 'PRS GEN3 STOCK'\r\n              },{\r\n                image:'https://www.magpul.com/Admin/Public/GetImage.ashx?Image=/Files/Files/Images/Homepage/Hats.jpg&Format=jpg&Height=760&Crop=5&background=ffffff',\r\n                text: 'MAGPUL HATS'\r\n              },{\r\n                image:'https://www.magpul.com/Admin/Public/GetImage.ashx?Image=/Files/Files/Images/Homepage/SL-SCarousel.jpg&Format=jpg&Height=760&Crop=5&background=ffffff',\r\n                text: 'MOE SL-S CARBINE STOCK'\r\n              },{\r\n                image:'https://www.magpul.com/Admin/Public/GetImage.ashx?Image=/Files/Files/Images/Homepage/HunterTakedown.jpg&Format=jpg&Height=760&Crop=5&background=ffffff',\r\n                text: 'HUNTER SERIES STOCKS AND ACCESSORIES'\r\n              },{\r\n                image:'https://www.magpul.com/Admin/Public/GetImage.ashx?Image=/Files/Files/Images/Homepage/Glock21.jpg&Format=jpg&Height=760&Crop=5&background=ffffff',\r\n                text: 'PMAG 21 GL9'\r\n              }];\r\n    }\r\n  };\r\n});\r\n","myApp.directive('footerDirect',function(){\r\n  return {\r\n    restrict: 'EA',\r\n    templateUrl: '../../templates/footer.html',\r\n    link: function (scope,element,attribute){\r\n\r\n    }\r\n  };\r\n});//closing\r\n","myApp.directive('menuDirect',function(productSrvc){\r\n  return {\r\n    restrict: 'EA',\r\n    templateUrl: '../../templates/menuBar.html',\r\n    link: function (scope,element,attribute){\r\n      // productSrvc.getCart().then(function(res){\r\n      //   scope.cartCount = res.length;\r\n      //   console.log('cartCount',res.length);\r\n      // })\r\n      // scope.cartCount = (productSrvc.getCart()).length;\r\n    },\r\n    controller: function($scope,cartSrvc){\r\n\r\n      let fireFn = ()=>{\r\n        $scope.cartCount = cartSrvc.getCart().reduce((prev, curr)=>{\r\n          return prev + curr.quantity;\r\n        },0);\r\n      }\r\n\r\n      $scope.$on('cartCount',(event, args)=>{\r\n        fireFn();\r\n      });\r\n      fireFn();\r\n    }\r\n  };\r\n});//closing\r\n","myApp.controller('cartCtrl',function($scope,cartSrvc,$rootScope){\r\n  $scope.cart = cartSrvc.getCart();\r\n  let cartTotalFn = function(){\r\n    let total = 0;\r\n\r\n    $scope.cart.forEach(function(element, index){\r\n      total = (total + parseFloat(element.total));\r\n      console.log((total + parseFloat(element.total)))\r\n      // total = parseInt(total).toFixed(2);\r\n    });\r\n    console.log('fired sub-total', total);\r\n    return total;\r\n  }\r\n  $scope.subTotal = cartTotalFn();\r\n  $scope.copyright = '\\xAE';\r\n\r\n  $scope.cart.forEach((element,index)=>{\r\n    element.total = (element.quantity * element.price);\r\n    $scope.subTotal = cartTotalFn();\r\n  });\r\n\r\n  $scope.cartUpdate = (num,index)=>{\r\n    console.log('cart index num', index, num);\r\n    if(!num){\r\n      return;\r\n    }else{\r\n      num = parseInt(num);\r\n      console.log('cartUpdate fired',num);\r\n      $scope.cart[index].quantity = parseInt(num);\r\n      $scope.cart[index].total = num*$scope.cart[index].price;\r\n      // console.log('new quantity', $scope.cart[index]);\r\n      cartSrvc.updateCart($scope.cart);\r\n      $scope.subTotal = cartTotalFn();\r\n      $rootScope.$broadcast('cartCount');\r\n      return swal('Updated');\r\n    }\r\n  }\r\n  $scope.cartRemove = (index)=>{\r\n    $scope.cart.splice(index,1);\r\n    cartSrvc.updateCart($scope.cart);\r\n    $scope.subTotal = cartTotalFn();\r\n  }\r\n  $scope.subTotal = cartTotalFn();\r\n});//closing\r\n","myApp.controller('homeCtrl',function($scope,mainSrvc){\r\n// $scope.test = 'PMAG\\xAE 30 AK/AKM GEN M3\\u2122';\r\n});//closing\r\n","myApp.controller('loginCtrl',function($scope,loginSrvc){\r\n  $scope.test = 'poop';\r\n});//closing\r\n","myApp.controller('productCtrl',function($scope,$state,$stateParams,$sce,productSrvc){\r\n  $scope.test = 'PMAG\\xAE 30 AK/AKM MOE\\xAE';\r\n  $scope.category = $stateParams.category;\r\n  $scope.subcategory = $stateParams.subcategory.toUpperCase();\r\n  productSrvc.getProductList($stateParams.subcategory).then((res)=>{\r\n    $scope.products = res;\r\n    // console.log($scope.test);\r\n    // console.log($scope.products[0]);\r\n  });\r\n});//closing\r\n","myApp.controller('productDetailCtrl',function($scope,$state,$stateParams,$sce,productSrvc){\r\n  $scope.colorFn = function(str){\r\n    if(str === \"black\"){\r\n      $scope.color = \"BLACK\";\r\n      // console.log('fn fired', $scope.color);\r\n    }else if(str === 'sand'){\r\n      $scope.color = \"SAND\";\r\n      $scope.colorImg = ''\r\n      // console.log('fn fired', $scope.color);\r\n    }\r\n  };\r\n  $scope.copyright = '\\xAE';\r\n  $scope.test = $stateParams.id;\r\n  productSrvc.getProductId($stateParams.id).then(function(res){\r\n    // console.log(res);\r\n    $scope.productData = res;\r\n    // console.log($scope.productData[0].mainimg);\r\n    $scope.productData[0].subcategory = $scope.productData[0].subcategory.toUpperCase();\r\n  });\r\n  // console.log($stateParams.id);\r\n  $scope.addToShoppingCart = (i,p)=>{\r\n    // console.log('fn fired',i,q,p);\r\n    if(!$scope.color){\r\n      return swal('Please select a color');\r\n      // return alert('Please select color');\r\n    }\r\n    if(!$scope.quantity){\r\n      $scope.quantity = 1;\r\n    }\r\n      var product = {\r\n        id: i,\r\n        name: $scope.productData[0].name,\r\n        caliber: $scope.productData[0].caliber,\r\n        modelNumber: $scope.productData[0].modelNumber,\r\n        quantity: parseInt($scope.quantity),\r\n        price: parseFloat(p),\r\n        color: $scope.color,\r\n        img: $scope.productData[0].mainimg,\r\n        new: $scope.productData[0].new\r\n    }\r\n    if($scope.quantity && $scope.color){\r\n      // console.log('front end ctrl fired',product);\r\n      productSrvc.addToCart(product);\r\n      $scope.quantity = null;\r\n    }\r\n  }\r\n});//closing\r\n","myApp.service('cartSrvc',function($http,$rootScope){\r\n  // const cart = [];\r\n  this.getCart = function(){\r\n    if(!localStorage.getItem('cart')){\r\n      return false;\r\n    }else {\r\n      let cart = JSON.parse(localStorage.getItem('cart'));\r\n      // console.log('cartSrvc',cart);\r\n      return cart;\r\n    }\r\n    // return cart.slice();\r\n  }\r\n  this.updateCart = (arr)=>{\r\n    // console.log('srvc',arr)\r\n    localStorage.cart = JSON.stringify(arr);\r\n    $rootScope.$broadcast('cartCount');\r\n  }\r\n  // this.addToCart = function(productObj){\r\n  //   cart.push(productObj);\r\n  //   //foreach if id is there at one to quantity\r\n  //   //update backend table\r\n  //   //update localStorage dollar localStorage\r\n  // }\r\n  this.removeFromCart = function(id){\r\n    //prototype find id splice\r\n    //update backend table\r\n    //update localStorage\r\n  }\r\n});\r\n","myApp.service('loginSrvc', function($http){\r\n  \r\n});\r\n","myApp.service('mainSrvc',function(){\r\n\r\n});\r\n","myApp.service('productSrvc',function($http,$rootScope){\r\n  this.getProductList = function(subcategory){\r\n    return $http({\r\n      method: 'GET',\r\n      url: `/api/products/${subcategory}`\r\n    }).then(function(res){\r\n      var arr = splitDollarArr(res.data);\r\n      return arr;\r\n    });\r\n  }\r\n  this.getProductId = function(id){\r\n    // console.log('fn fired');\r\n    return $http({\r\n      method: 'GET',\r\n      url: `/api/products/?id=${id}`\r\n    }).then(function(res){\r\n      // console.log('id res',res.data);\r\n      let arr = splitDollarArr(res.data);\r\n      return arr;\r\n    });\r\n  }\r\n///Cart ///////////////////////////////////////////////////\r\n///Cart ///////////////////////////////////////////////////\r\nthis.addToCart = (obj)=>{\r\n  // console.log('srvc obj', obj);\r\n  if(!localStorage.getItem('cart')){\r\n    let cart = [];\r\n    cart.push(obj);\r\n    cart.forEach((element,index)=>{\r\n      element.total = (element.quantity * element.price).toFixed(2);\r\n    });\r\n    localStorage.setItem('cart',JSON.stringify(cart));\r\n  }else{\r\n    let cart = JSON.parse(localStorage.getItem('cart'));\r\n    let present;\r\n    cart.forEach((element,index)=>{\r\n      if(element.id === obj.id && element.color === obj.color){\r\n        element.quantity += obj.quantity;\r\n        element.total = (element.quantity * element.price).toFixed(2);\r\n        present = true;\r\n      }\r\n    });\r\n    if(!present){\r\n      cart.push(obj);\r\n    }\r\n    localStorage.cart = JSON.stringify(cart);\r\n    console.log('localStorage',cart);\r\n  }\r\n  $rootScope.$broadcast('cartCount');\r\n  return swal('Item add to cart');\r\n}\r\n\r\n});//closing\r\nlet splitDollarArr = function(arr){\r\n  let arrKey = ['features','details','specs','color'];\r\n  arr.forEach((object,index)=>{\r\n    arrKey.forEach((key,i)=>{\r\n      if((object[key]) && object[key].match(/(\\\\\\$)/gi)){\r\n        object[key] = object[key].split(/\\\\\\$/gi);\r\n      }else{\r\n        let arrNew = [];\r\n        arrNew.push(object[key]);\r\n        object[key] = arrNew;\r\n      }\r\n    })\r\n  });\r\n  return arr;\r\n};\r\n\r\nlet splitDollarObj = function(obj){\r\n  let arrKey = ['features','details','specs','color'];\r\n  arrKey.forEach((key,i)=>{\r\n    if((obj[key]) && obj[key].match(/(\\\\\\$)/gi)){\r\n      obj[key] = obj[key].split(/\\\\\\$/gi);\r\n    }else{\r\n      let arrNew = [];\r\n      arrNew.push(obj[key]);\r\n      obj[key] = arrNew;\r\n    }\r\n  })\r\n  return arr;\r\n};\r\n"]}